# BeginView 実装状況ドキュメント

**最終更新日時**: 2025-11-30 20:26:25  
**バージョン**: v0.3  
**プロジェクト**: BeginView - シンプルな画像スライドショービューア

[▶ Download BeginView for Windows (latest)](https://github.com/tenserastudio/beginview/releases/tag/v0.3)

---

## 📋 目次

1. [プロジェクト概要](#プロジェクト概要)
2. [実装済み機能](#実装済み機能)
3. [未実装機能・制限事項](#未実装機能制限事項)
4. [技術スタック](#技術スタック)
5. [プロジェクト構成](#プロジェクト構成)
6. [今後の開発計画](#今後の開発計画)
7. [既知の問題・改善点](#既知の問題改善点)

---

## 📌 プロジェクト概要

BeginView は、Windows向けのシンプルな画像スライドショービューアアプリです。  
このプロジェクトは、より大規模なアプリ「Viewlips」の開発に向けた練習用ミニアプリとして作成されました。

### 目的
- きれいで壊れにくい最小限のビューアを作ること
- フォルダの画像スライドショー表示
- exe化（pyinstaller想定）
- GitHubでの公開

### 対象環境
- **OS**: Windows
- **Python**: 3.11以上
- **GUIフレームワーク**: PySide6（PyQt6は使用しない）

---

## ✅ 実装済み機能

### v0.1 (基本機能) - ✅ 完了

#### 1. フォルダ選択と画像読み込み
- ✅ フォルダ選択ダイアログの実装
- ✅ 画像ファイルの検出（`.jpg`, `.jpeg`, `.png`）
- ✅ ファイル名昇順でのソート
- ✅ 画像が無い場合のエラーメッセージ表示
- ✅ エラーハンドリング（壊れた画像をスキップ）

**実装ファイル**: `beginview_window.py` (`_on_open_folder` メソッド)

#### 2. 自動スライドショー
- ✅ QTimerを使用した自動切り替え
- ✅ デフォルト間隔: 3秒（3000ms）
- ✅ 最後まで表示したら先頭に戻る無限ループ
- ✅ 再生/一時停止機能

**実装ファイル**: `beginview_window.py` (`_init_timer`, `_on_timer_tick` メソッド)

#### 3. 画像表示とリサイズ
- ✅ QLabelを使用した画像表示
- ✅ ウィンドウサイズに合わせた自動リサイズ
- ✅ `Qt.KeepAspectRatio` でアスペクト比維持
- ✅ `Qt.SmoothTransformation` でスムーズなスケーリング
- ✅ ウィンドウサイズ変更時の自動再スケーリング

**実装ファイル**: `beginview_window.py` (`_show_image`, `_scale_pixmap`, `resizeEvent` メソッド)

#### 4. キーボード操作
- ✅ `Space`: 再生/一時停止をトグル
- ✅ `→`: 次の画像へ進む
- ✅ `←`: 前の画像へ戻る
- ✅ `F11`: フルスクリーン/通常ウィンドウをトグル
- ✅ `Esc`: フルスクリーンから戻る

**実装ファイル**: `beginview_window.py` (`keyPressEvent` メソッド)

#### 5. 多言語対応（日本語/英語）
- ✅ 簡易な辞書ベースのi18n実装
- ✅ メニュー、メッセージダイアログ、ウィンドウタイトルの多言語化
- ✅ 言語切り替えメニュー（`Language > 日本語 / English`）
- ✅ 実行時の言語切り替え対応

**実装ファイル**: 
- `i18n.py` (翻訳辞書)
- `beginview_window.py` (`_set_language`, `_update_ui_texts` メソッド)

---

### v0.2 (拡張機能) - ✅ 完了

#### 1. マウス操作
- ✅ 画像をシングルクリック: 再生/一時停止をトグル
- ✅ 画像をダブルクリック: フルスクリーンをトグル

**実装ファイル**: `beginview_window.py` (`_on_image_label_clicked`, `_on_image_label_double_clicked` メソッド)

#### 2. サブフォルダ再帰読み込み
- ✅ 設定メニューから「サブフォルダを含める」を有効化可能
- ✅ `Path.rglob()` を使用した再帰的検索
- ✅ チェックボックスでON/OFF切り替え

**実装ファイル**: `beginview_window.py` (`_on_open_folder`, `_toggle_include_subfolders` メソッド)

#### 3. スライドショー間隔の調整
- ✅ プリセット間隔の選択（1秒、2秒、3秒、5秒、10秒）
- ✅ メニューから選択可能（`Settings > Slide Show Interval`）
- ✅ 選択した間隔がメニューにチェック表示
- ✅ タイマーの動的更新

**実装ファイル**: `beginview_window.py` (`_set_interval` メソッド)

---

### v0.3 (高度な機能) - ✅ 完了

#### 1. カスタム間隔設定
- ✅ ダイアログで任意の秒数を入力可能
- ✅ 範囲: 0.1秒～3600秒
- ✅ 無効な値の検証と警告表示
- ✅ メニューからアクセス可能（`Settings > Slide Show Interval > Custom Interval...`）

**実装ファイル**: `beginview_window.py` (`_set_custom_interval` メソッド)

#### 2. 画像の拡大表示機能（ズーム）
- ✅ マウスホイールでズームイン/アウト
- ✅ `+`/`-` キーでズームイン/アウト
- ✅ `0` キーで100%表示（等倍）
- ✅ `F` キーでウィンドウにフィット
- ✅ `Esc` キーでズームモードをfitに戻す
- ✅ ズーム倍率: 0.1倍～10倍
- ✅ ズームモード管理（fit, 100%, custom）
- ✅ メニューからも操作可能（`View` メニュー）

**実装ファイル**: 
- `beginview_window.py` (`_zoom_fit`, `_zoom_100`, `_zoom_in`, `_zoom_out`, `_apply_zoom`, `_on_image_label_wheel` メソッド)

#### 3. 画像情報の表示
- ✅ ファイル名の表示
- ✅ ファイルサイズの表示（MB/bytes）
- ✅ 画像解像度の表示（幅 × 高さ px）
- ✅ 現在位置の表示（X / 合計）
- ✅ `View > Show Image Info` または `I` キーで表示

**実装ファイル**: `beginview_window.py` (`_show_image_info` メソッド)

---

## ❌ 未実装機能・制限事項

### 未実装機能

#### 1. 画像の回転機能
- ❌ 画像の90度回転（時計回り/反時計回り）
- ❌ 画像の180度回転
- **優先度**: 中
- **予定バージョン**: v0.4以降

#### 2. スライドショーの開始/終了位置の指定
- ❌ 特定の画像から開始
- ❌ 特定の画像で終了
- ❌ 範囲指定でのスライドショー
- **優先度**: 中
- **予定バージョン**: v0.4以降

#### 3. スライドショーの保存/読み込み機能
- ❌ スライドショー設定の保存
- ❌ 設定ファイルの読み込み
- ❌ プレイリスト機能
- **優先度**: 低
- **予定バージョン**: v0.5以降

#### 4. 画像のパン（移動）機能
- ❌ ズーム時に画像をドラッグで移動
- ❌ ズーム時のスクロールバー
- **優先度**: 中
- **予定バージョン**: v0.4以降

#### 5. その他の画像形式サポート
- ❌ GIF（アニメーション対応）
- ❌ WebP
- ❌ BMP
- ❌ TIFF
- **優先度**: 低
- **予定バージョン**: v0.4以降

#### 6. exe化（PyInstaller）
- ❌ PyInstallerでのexe化
- ❌ 配布用パッケージの作成
- **優先度**: 高（プロジェクト目標の一つ）
- **予定バージョン**: v0.4

#### 7. 設定の永続化
- ❌ 言語設定の保存
- ❌ スライドショー間隔の保存
- ❌ サブフォルダ設定の保存
- ❌ ウィンドウサイズ・位置の保存
- **優先度**: 中
- **予定バージョン**: v0.4以降

#### 8. ショートカットキーのカスタマイズ
- ❌ ユーザー定義のショートカットキー
- ❌ ショートカットキーの設定画面
- **優先度**: 低
- **予定バージョン**: v0.5以降

#### 9. 画像のフィルタリング
- ❌ ファイル名での検索
- ❌ 日付でのフィルタリング
- ❌ サイズでのフィルタリング
- **優先度**: 低
- **予定バージョン**: v0.5以降

#### 10. サムネイル表示
- ❌ 画像一覧のサムネイル表示
- ❌ サムネイルから画像を選択
- **優先度**: 低
- **予定バージョン**: v0.5以降

---

### 制限事項

#### 1. サポートする画像形式
- **現在**: `.jpg`, `.jpeg`, `.png` のみ
- **理由**: 軽量性を重視し、標準ライブラリとPySide6のみで対応可能な形式に限定

#### 2. サブフォルダ再帰読み込み
- **現在**: 有効/無効の切り替えのみ
- **制限**: 深さ制限なし（非常に深い階層の場合、パフォーマンスに影響する可能性）

#### 3. ズーム機能
- **現在**: ズームイン/アウトのみ
- **制限**: パン（移動）機能は未実装（ズーム時に画像の一部が見切れる可能性）

#### 4. メモリ管理
- **現在**: 画像を都度読み込み
- **制限**: 大量の画像を読み込む場合、メモリ使用量が増加する可能性

#### 5. エラーハンドリング
- **現在**: コンソールにログ出力
- **制限**: 本格的なログシステムは未実装

---

## 🛠 技術スタック

### 使用技術
- **言語**: Python 3.11+
- **GUIフレームワーク**: PySide6 6.5.0以上
- **標準ライブラリ**: `pathlib`, `typing`, `os`

### 依存関係
```
PySide6>=6.5.0
```

### 開発環境
- **OS**: Windows 10/11
- **仮想環境**: venv（推奨）
- **パッケージ管理**: pip

---

## 📁 プロジェクト構成

```
beginview/
├── main.py                 # エントリポイント
├── beginview_window.py     # メインウィンドウクラス（約650行）
├── i18n.py                 # 多言語対応モジュール（約80行）
├── requirements.txt        # 依存関係
├── .gitignore              # Git除外設定
├── README.md               # プロジェクト説明
├── IMPLEMENTATION_STATUS.md # このドキュメント
└── venv/                   # 仮想環境（.gitignore対象）
```

### ファイル詳細

#### `main.py`
- **役割**: アプリケーションのエントリポイント
- **行数**: 約20行
- **機能**: QApplicationの生成とメインウィンドウの起動

#### `beginview_window.py`
- **役割**: メインウィンドウクラスと全機能の実装
- **行数**: 約650行
- **主要クラス**: `BeginViewWindow`
- **主要メソッド数**: 約30個

#### `i18n.py`
- **役割**: 簡易な多言語対応
- **行数**: 約80行
- **対応言語**: 日本語、英語
- **翻訳キー数**: 約30個

---

## 🗺 今後の開発計画

### v0.4 (予定)

#### 優先度: 高
1. **exe化（PyInstaller）**
   - PyInstallerでのexe化
   - 配布用パッケージの作成
   - アイコンの設定

2. **画像のパン（移動）機能**
   - ズーム時のドラッグ移動
   - スクロールバーの実装

3. **設定の永続化**
   - 設定ファイル（JSON/INI）の保存
   - 言語、間隔、サブフォルダ設定の保存
   - ウィンドウサイズ・位置の保存

#### 優先度: 中
4. **画像の回転機能**
   - 90度回転（時計回り/反時計回り）
   - 180度回転
   - 回転状態の保存

5. **スライドショーの開始/終了位置の指定**
   - 範囲選択UI
   - 特定画像からの開始

### v0.5 (予定)

#### 優先度: 中
1. **スライドショーの保存/読み込み機能**
   - プレイリスト機能
   - 設定のエクスポート/インポート

2. **その他の画像形式サポート**
   - WebP
   - BMP
   - TIFF

#### 優先度: 低
3. **ショートカットキーのカスタマイズ**
   - ユーザー定義のショートカット
   - 設定画面

4. **画像のフィルタリング**
   - ファイル名検索
   - 日付フィルタリング

5. **サムネイル表示**
   - 画像一覧のサムネイル表示

---

## 🐛 既知の問題・改善点

### 既知の問題

#### 1. ズーム時のパン機能未実装
- **問題**: ズーム時に画像の一部が見切れる場合、移動できない
- **影響**: 中
- **対応**: v0.4で実装予定

#### 2. 大量画像読み込み時のパフォーマンス
- **問題**: 大量の画像を読み込む場合、起動が遅くなる可能性
- **影響**: 低（通常使用では問題なし）
- **対応**: 必要に応じて最適化

#### 3. エラーログの出力先
- **問題**: コンソール出力のみ（本格的なログシステムなし）
- **影響**: 低
- **対応**: 必要に応じてログシステムを実装

### 改善点

#### 1. コード品質
- ✅ 型ヒントの使用
- ✅ docstringの記述
- ⚠️ ユニットテストの追加（未実装）
- ⚠️ コードのリファクタリング（一部メソッドが長い）

#### 2. ユーザビリティ
- ✅ 直感的な操作
- ✅ 多言語対応
- ⚠️ ヘルプ機能の追加（未実装）
- ⚠️ ツールチップの追加（未実装）

#### 3. パフォーマンス
- ✅ 効率的な画像読み込み
- ⚠️ 画像のキャッシュ機能（未実装）
- ⚠️ 非同期読み込み（未実装）

---

## 📊 実装進捗サマリー

| カテゴリ | 実装済み | 未実装 | 進捗率 |
|---------|---------|--------|--------|
| 基本機能 (v0.1) | 5/5 | 0 | 100% |
| 拡張機能 (v0.2) | 3/3 | 0 | 100% |
| 高度な機能 (v0.3) | 3/3 | 0 | 100% |
| 予定機能 (v0.4+) | 0 | 10+ | 0% |
| **合計** | **11/11** | **10+** | **約52%** |

*注: 予定機能は今後追加される可能性のある機能を含む*

---

## 📝 開発メモ

### 設計方針
- **シンプルさを重視**: 余計な依存ライブラリを避ける
- **拡張性**: 将来の機能追加を考慮した設計
- **保守性**: 読みやすいコード、適切なコメント

### 技術的決定
- **PySide6を選択**: PyQt6ではなくPySide6を使用（ライセンスの違い）
- **簡易i18n**: 複雑なフレームワークを使わず、辞書ベースで実装
- **型ヒント**: Python 3.11の型ヒント機能を活用

### 今後の課題
1. exe化の実装とテスト
2. パン機能の実装
3. 設定の永続化
4. ユニットテストの追加

---

## 📅 更新履歴

- **2025-11-30 20:26:25**: v0.3実装完了、このドキュメント作成
- **2025-11-30**: v0.2実装完了
- **2025-11-30**: v0.1実装完了、プロジェクト開始

---

**このドキュメントは、プロジェクトの実装状況を把握し、今後の開発計画を立てるために作成されました。**  
**定期的に更新し、最新の状態を反映してください。**

